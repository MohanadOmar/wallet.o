<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet.O</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fugaz+One&family=IBM+Plex+Mono:wght@700&display=swap" rel="stylesheet">

    <!-- FontAwesome Kit -->
    <script src="https://kit.fontawesome.com/5eb877632e.js" crossorigin="anonymous"></script>
    
    <!-- Bootstrap Css -->
    <link rel="stylesheet" href="bootstrap-4.6.2-dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <!-- Custom Css -->
    <link rel="stylesheet" href="css/home.css" type="text/css">

</head>
<body>

  <div id="Main">
    <div class="row">
      <div class="col-lg-9 col-xs-8">
        <div class="row">

          <div class="col-lg-3 col-xs-12 balance-box">
            Balance
            <br>
            <%= wholeBalance %> EGP
          </div>

          <div class="col-lg-8 col-xs-12 accounts-box ml-lg-4">
            <p>Accounts <a href="/new-account"> <i class="fa-solid fa-plus"></i></a></p>
            <div class="row">
              <% accounts.forEach(function(account) { %>
                <div class="col-lg-4 col-xs-6 account" onclick="">
                  <i class="<%= account.type %>"></i>
                  <a href="/delete-account/<%= account._id %>"><i class="fa-solid fa-minus" style="color: #912121; margin-right: 0;"></i></a>
                  <br>
                  <%= account.name %>
                  <br>
                  <%= account.balance %> EGP
                </div>
              <% }) %>
           </div>
          </div>

        </div>
        <div class="row">

          <div class="col-lg-3 col-xs-12 data-analysis-box mt-lg-4">
            <p>Spending</p>
            <% categories.forEach(category => { %>  
              <%= category.name %>
              <%= category.cost %>
              <br>
            <% }) %>
              
          </div>

          <div class="col-lg-4 col-xs-12 budgets-box ml-lg-4 mt-lg-4">
            <p>Budgets <a href="/new-budget"><i class="fa-solid fa-plus"></i></a></p>
            <div class="row">
              <% budgets.forEach(function(budget) { %>
                <div class="col-12 budget mt-lg-2 budget">
                      <%= budget.name %>
                      <a href="/delete-budget/<%= budget._id %>"><i class="fa-solid fa-trash" style="color: red;"></i></a>
                      <br>
                      <p><em><%= budget.startCost %> EGP</em> <em><%= budget.cost %> EGP</em></p>
                      <div id="progressbar">
                        <div id="setWidth" style="width: 90%;"></div>
                      </div>
                      <br>
                </div>
              <% }) %>
            </div>
          </div>

          <div class="col-lg-4 col-xs-12 subsciptions-box ml-lg-4 mt-lg-4"> 
            <p>Subsciptions <a href="/add-subscription"><i class="fa-solid fa-plus"></i></a></p>
            <div>
              <% subscriptions.forEach(subscription => { %>
                <%= subscription.name %>
                <br>
              <% }) %>
            </div>
          </div>

        </div>
      </div>
      <div class="col-lg-3 col-xs-12 records-box">
        <p>All Records <a href="/new-record"><i class="fa-solid fa-plus"></i></a></p>
        <div class="row">
          <% records.forEach(function(record) { %>
            <div class="col-12 budget">
              <% if(record.type == 'income'){ %>
                <p>
                  <%= record.name %>
                  <a href="/delete-record/<%= record._id %>"><i class="fa-solid fa-trash" style="color: red;"></i></a>
                  <br>
                  +<%= record.cost %> EGP
                  <br>
                  <%= record.category %>
                </p>
              <% } else { %>
                <p>
                  <%= record.name %>
                  <a href="/delete-record/<%= record._id %>"><i class="fa-solid fa-trash" style="color: red;"></i></a>
                  <br>
                  -<%= record.cost %> EGP
                  <br>
                  <%= record.category %>
                </p>
              <% } %>

            </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>

    <!-- Bootstrap Js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>